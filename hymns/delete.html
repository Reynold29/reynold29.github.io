<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Request Data Deletion</title>
    <link rel="shortcut icon" href="assets/images/favicon.png" type="image/png" />
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <style>
      .container-narrow { max-width: 720px; }
      .card { border-radius: 12px; }
      .muted { opacity: .8; }
    </style>
  </head>
  <body>
    <header class="header-area">
      <div class="navbar-area">
        <div class="container">
          <nav class="navbar navbar-expand-lg">
            <a class="navbar-brand" href="index.html">‚Üê Back to Home</a>
          </nav>
        </div>
      </div>
    </header>

    <main class="pt-120 pb-120">
      <div class="container container-narrow">
        <div class="row justify-content-center">
          <div class="col-12">
            <div class="card p-4 p-md-5 shadow-sm">
              <h2 class="mb-2">Request deletion of your data</h2>
              <p class="text muted mb-4">Please fill in all fields. Your request will be sent directly to us.</p>

              <form id="deleteForm" action="https://formspree.io/f/mwpqyypg" method="POST" novalidate>
                <div class="mb-3">
                  <label for="fullName" class="form-label">Full name</label>
                  <input id="fullName" name="fullName" class="form-control" placeholder="Your full name" required />
                </div>
                <div class="mb-3">
                  <label for="email" class="form-label">Email address</label>
                  <input id="email" name="email" type="email" class="form-control" placeholder="you@example.com" required />
                </div>
                <div class="mb-3">
                  <label for="reason" class="form-label">Reason for deletion</label>
                  <textarea id="reason" name="reason" class="form-control" rows="5" placeholder="Type your reason here..." required></textarea>
                </div>
                <input type="hidden" name="_subject" value="Request to delete my user data" />
                <input type="hidden" name="_replyto" id="_replyto" value="" />
                <button type="submit" class="main-btn">Send request</button>
              </form>
              <div id="status" class="mt-3 small"></div>
              <p class="mt-3 small muted">This form sends directly to <b>reyziecrafts@gmail.com</b>. Nothing is stored on this website.</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      (function() {
        const form = document.getElementById('deleteForm');
        const statusEl = document.getElementById('status');
        form.addEventListener('submit', async function(e) {
          e.preventDefault();
          statusEl.textContent = '';
          const submitBtn = form.querySelector('button[type="submit"]');

          // Basic client-side validation
          const fullName = document.getElementById('fullName');
          const email = document.getElementById('email');
          const reason = document.getElementById('reason');
          if (!fullName.value.trim() || !email.value.trim() || !reason.value.trim()) {
            statusEl.textContent = 'Please complete all required fields.';
            return;
          }
          if (email.validity && !email.validity.valid) {
            statusEl.textContent = 'Please enter a valid email address.';
            return;
          }

          // Ensure reply-to is set for Formspree
          const replyTo = document.getElementById('_replyto');
          if (replyTo) replyTo.value = email.value.trim();

          submitBtn.disabled = true;
          submitBtn.textContent = 'Sending...';
          try {
            const data = new FormData(form);
            const res = await fetch(form.action, {
              method: 'POST',
              body: data,
              headers: { 'Accept': 'application/json' }
            });
            if (res.ok) {
              form.reset();
              statusEl.textContent = 'Request sent. We will get back to you.';
            } else {
              statusEl.textContent = 'Failed to send. Please try again later.';
            }
          } catch (err) {
            statusEl.textContent = 'Failed to send. Please check your connection and try again.';
          } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = 'Send request';
          }
        });
      })();
    </script>
  </body>
  </html>


